{% extends 'dashboard/base.html' %}
{% block content %}

<!-- Begin Page Content -->
<div class="container-fluid">
    <!------------------------ multiple tabs with their multiple panels to manage all the data in a single page  -->
    <div class="row tab">
        <button class="tablinks" onclick="opennavbartabs(event, 'Dashboard')" id="defaultOpen">Dashboard</button>
    </div>

    <div id="Dashboard" class="tabcontent">
        <!-- dashboard section -->
        <div class="container-fluid">
            <br>
            {% if messages %}
            <ul class="messages list-unstyled">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }} text-center font-weight-bold p-2" {% endif %}>
                    {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
                    {{ message }}
                    </li>
                    {% endfor %}
            </ul>
            {% endif %}
            <div class="row">
                <!-- title -->
                <div class="col-md-9">
                    <b>Workspaces</b> <span>({{len_work}})</span>
                </div>
                <!-- searchbox -->
                <div class="col-md-3">
                    <input type="text" placeholder="Search Workspaces" class="form-control">
                </div>
            </div>
            <!-- content section -->
            <div class="row">
                <div class="col-lg-12" style="padding-top: 20px;">
                    <div class="row">
                        <!-- add workspace box 1 -->
                        <div class="wrapper">
                            <a class="box" href="#" data-toggle="modal" data-target="#createworkspace">
                                <div class="box_insidediv">
                                    <i class="fa fa-plus-circle fa-lg"></i><br>
                                    <b>Create New Workspace</b>
                                </div>
                            </a>
                        </div>
                        <!-- box 2 -->
                        {% for space in workspace %}
                            <div class="wrapper">
                                <a class="box" href="/workspace/{{space.slug}}">
                                    <div class="box_insidediv">
                                        <div class="col-lg-12">
                                            <span class="user_txticon text-capitalize">{{space.name|make_list|first}}</span><br>
                                            <p class="text-capitalize">{{space.name}}</p>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <span>Tasks</span><br><b>{{space.task_set.count}}</b>
                                            </div>
                                            <div class="col-6">
                                                <span>Issues</span><br><b>{{space.issue_set.count}}</b>
                                            </div>
                                        </div>
                                        <br><br>
                                        <!-- <p>{{space.task_set.all}}</p> -->
                                        <div class="row boxinside_div_footer">
                                            <small>Members:</small> &nbsp;
                                            {% for name in space.task_set.all %}
                                                <span class="member_circle text-white text-capitalize">{{name.assigned_to.name|first}}</span>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}