{% extends 'dashboard/base.html' %}
{% load static %}
{% block content %}

<div class="container-fluid">
    <div class="card p-4">
        {% if messages %}
        <ul class="messages list-unstyled">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }} font-weight-bold text-center p-2" {% endif %}>
                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
                {{ message }}
                </li>
                {% endfor %}
        </ul>
        {% endif %}
        <div class="row">
            <div class="col-7">
                <span>
                    <button class="btn btn-outline-warning btn-sm ml-5" onclick="history.back()">Back</button>
                </span>
                <h5 class="font-weight-bold text-info">Issue - {{obj.title}}</h5>
            </div>
            <div class="col-5 text-right">
                | <select name="issue_status" id="issue_status_{{obj.id}}" class="btn btn-success mb-2 rounded"
                    onchange="issue_status_change({{obj.id}})">
                    <option value="1" {% if obj.issue_status == '1' %}selected{% endif %}>Not Started</option>
                    <option value="2" {% if obj.issue_status == '2' %}selected{% endif %}>In Progress</option>
                    <option value="3" {% if obj.issue_status == '3' %}selected{% endif %}>In Review</option>
                    <option value="4" {% if obj.issue_status == '4' %}selected{% endif %}>Completed</option>
                    <option value="5" {% if obj.issue_status == '5' %}selected{% endif %}>Cancelled</option>
                </select>

                <!-- <span class="dropdown" style="margin-top: 10px;">
                    <a href="#" class="dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-plus-circle fa-lg" style="font-size: 32px;"></i>
                    </a>
                    <span class="dropdown-menu">
                        <a class="dropdown-item" href="#">Andrew</a>
                        <a class="dropdown-item" href="#">John</a>
                        <a class="dropdown-item" href="#">Adam</a>
                    </span>
                </span> -->
            </div>
        </div>
        <div class="row">
            <div class="col-7 bodycol7">
                <form method="POST">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
                            <label for="planned_start_end_date">Planned Start</label>
                            <small class="ml-3 font-weight-bold text-danger">{% if obj.planned_start_date %}{{obj.planned_start_date|date:'d-m-Y H:i'}}{% endif %}</small>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="planned_start_end_date">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </div>
                                <input type="datetime-local" class="form-control" id="id_planned_start_date"
                                    name="planned_start_date">
                            </div>
                        </div>

                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
                            <label for="planned_start_end_date">Planned End</label>
                            <small class="ml-3 font-weight-bold text-danger">{% if obj.planned_end_date %}{{obj.planned_end_date|date:'d-m-Y H:i'}}{% endif %}</small>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="planned_start_end_date"><i
                                            class="fa fa-calendar"></i></span>
                                </div>
                                <input type="datetime-local" class="form-control id_date" id="planned_end_date"
                                    name="planned_end_date">
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
                            <label for="actual_start_end_date">Actual Start</label>
                            <small class="ml-3 font-weight-bold text-danger">{% if obj.actual_start_date %}{{obj.actual_start_date|date:'d-m-Y H:i'}}{% endif %}</small>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="actual_start_end_date"><i
                                            class="fa fa-calendar"></i></span>
                                </div>
                                <input type="datetime-local" class="form-control id_date" id="actual_start_date"
                                    name="actual_start_date">
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
                            <label for="actual_start_end_date">Actual End</label>
                            <small class="ml-3 font-weight-bold text-danger">{% if obj.actual_end_date %}{{obj.actual_end_date|date:'d-m-Y H:i'}}{% endif %}</small>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="actual_start_end_date"><i
                                            class="fa fa-calendar"></i></span>
                                </div>
                                <input type="datetime-local" class="form-control id_date" id="actual_end_date"
                                    name="actual_end_date">
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
                            <label for="priority">Priority</label>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="priority"><i class="fa fa-calendar"></i></span>
                                </div>
                                <select class="form-control" name="priority">
                                    <option value="4" {% if obj.priority == '4' %}selected{% endif %}>Critical</option>
                                    <option value="1" {% if obj.priority == '1' %}selected{% endif %}>High</option>
                                    <option value="2" {% if obj.priority == '2' %}selected{% endif %}>Medium</option>
                                    <option value="3" {% if obj.priority == '3' %}selected{% endif %}>Low</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
                            <label>Assigned To</label>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id=""><i class="fa fa-user"></i></span>
                                </div>
                                <select class="form-control" name="assigned_to">
                                    {% for employee in employees %}
                                        <option value="{{employee.id}}" {% if obj.assigned_to.id == employee.id %} selected {% endif %}>{{employee.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>                         
                        <div class="col-12">
                            <label for="Description">Description</label>
                            <textarea name="description" id="description" placeholder="Type something.." rows="2"
                                class="form-control">{% if obj.description %}{{obj.description}}{% endif %}</textarea>
                        </div>
                    </div>
                    <br>
                    <input type="submit" class="btn btn-default bg-gradient-success text-white text-right"
                        value="Update">
                </form>
                    <!-- <div class="col-12"><br>
                            <input type="text" class="form-control" placeholder="Add a to-do list item">
                        </div>  -->
                         <div class="row text-center" id="footer">
                            <div class="col-12">Created on - {{obj.created_on|date:'d-m-Y H:i'}}</div>
                    </div>
            </div>
            <div class="col-5 bodycol5">
                <!------------------------ multiple taskmanagertabs with their multiple panels to manage all the data in a single page  -->
                <div class="row taskmanagertab">
                    <button class="taskmanagertablinks" style="width: 24%;"
                        onclick="opentaskmanagertabs(event, 'taskmanager_comments')" id="defaultOpen">Comments</button>
                    <button class="taskmanagertablinks" style="width: 24%;"
                        onclick="opentaskmanagertabs(event, 'taskmanager_documents')">Documents</button>
                    <button class="taskmanagertablinks" style="width: 24%;"
                        onclick="opentaskmanagertabs(event, 'taskmanager_meetings')">Meetings</button>
                    <button class="taskmanagertablinks" style="width: 24%;"
                        onclick="opentaskmanagertabs(event, 'taskmanager_issues')">Issues</button>
                </div>
                <div id="taskmanager_comments" class="taskmanagertabcontent" style="display: block;">
                    <!-- comment section -->
                    <div class="container-fluid">
                        <!-- header options -->
                        <div class="row">
                            <div class="col-6">
                                <span class="btn-group" role="group" aria-label="toggle_button">
                                    <button type="button" id="allmessages" class="btn btn-primary">All
                                        Messages</button>
                                    <button type="button" id="replylater" class="btn btn-secondary">Reply Later</button>
                                </span>
                            </div>
                            <div class="col-6 text-right">
                                <a href="#">Show Receipt</a>
                            </div>
                        </div>
                        <!-- chatcontent -->
                        <div class="row chatstrip">
                            <div class="col-12">
                                <small>aug 21, 2021</small>
                            </div>
                            <div class="col-6"><b>Vishal Yadav</b></div>
                            <div class="col-6 text-right"><small>10:37 am</small></div>
                            <div class="col-8">
                                <p>Hello Sandeep this is just test message.</p>
                            </div>
                            <div class="col-4 text-right"><a href="#"><i class="fa fa-reply"></i>
                                    Reply</a></div>
                        </div>
                        <!-- chatcontent -->
                        <div class="row chatstrip">
                            <div class="col-12">
                                <small>aug 21, 2021</small>
                            </div>
                            <div class="col-6"><b>Vishal Yadav</b></div>
                            <div class="col-6 text-right"><small>10:37 am</small></div>
                            <div class="col-8">
                                <p>Hello Sandeep this is just test message.</p>
                            </div>
                            <div class="col-4 text-right"><a href="#"><i class="fa fa-reply"></i>
                                    Reply</a></div>
                        </div>
                        <!-- searchbox -->
                        <div class="row" id="searchbox">
                            <div class="input-group">
                                <input type="text" placeholder="Type your comment here..." class="form-control"
                                    aria-label="Large" aria-describedby="inputGroup-sizing-sm">
                                <div class="input-group-append">
                                    <a href="#"><span class="input-group-text">send</span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- default for reply later message -->
                    <div class="container-fluid" id="defaultmessage" style="display: none;">
                        <div class="text-center" style="margin: 100px auto;">
                            <img src="/static/img/undraw_Typing_re_d4sq.svg" alt="" style="width: 100px;height:100px">
                            <h4>No Message Yet</h4>
                            <p>Mark messages as "Reply Later" in the updates tab to<br>
                                filter them here so that you can reply them later.</p>
                        </div>
                    </div>
                    <!-- default for reply later message -->
                </div>
                <div id="taskmanager_documents" class="taskmanagertabcontent">
                    <!-- dashboard section -->
                    <div class="container-fluid">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default"><i
                                        class="fa fa-search"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Search" aria-label="Default"
                                aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div style="border-bottom: 1px solid #ccc;margin-bottom: 8px;margin-top: 5px;">
                            <small>Documents</small>
                        </div>
                        <div style="border: 1px solid #ccc;border-radius:5px;background-color: #fff;padding:5px">
                            <div><b><i class="fa fa-file color-primary"></i> Untitled folder</b> <br>
                                <ul class="list-inline">
                                    <li class="list-inline-item">• 1 files</li>
                                    <li class="list-inline-item">• Created By Vishal Yadav </li>
                                    <li class="list-inline-item">• Thu, Aug 19, 2021 3:28 PM</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="taskmanager_meetings" class="taskmanagertabcontent">
                    <!-- dashboard section -->
                    <div class="container-fluid">
                        <div style="border: 1px solid #ccc;border-radius:5px;background-color: #fff;padding:5px">
                            <div class="col-8">
                                <small> Thursday 1 hrs 0 mins</small> <br>
                                <h4>Demo Meeting Scheduled</h4>
                                <small>06:00 PM at DITS</small>
                            </div>
                            <div class="col-3">
                                <i class="fa fa-clock"></i>
                                <i class="fa fa-trash"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="taskmanager_issues" class="taskmanagertabcontent">
                    <!-- dashboard section -->
                    <div class="container-fluid">
                        <br>
                        <h2>Issues</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/issue_status_change.js'%}"></script>

{% endblock %}